<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>搭建过程 - 个人博客</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../../../favicon.png">
        
        <link rel="stylesheet" href="../../../../css/variables.css">
        <link rel="stylesheet" href="../../../../css/general.css">
        <link rel="stylesheet" href="../../../../css/chrome.css">
        
        <link rel="stylesheet" href="../../../../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../../highlight.css">
        <link rel="stylesheet" href="../../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../../README.html">关于书籍</a></li><li class="chapter-item expanded "><a href="../../../../product_design/README.html"><strong aria-hidden="true">1.</strong> 产品设计</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../product_design/theory/README.html"><strong aria-hidden="true">1.1.</strong> 产品设计方法</a></li><li class="chapter-item expanded "><a href="../../../../product_design/general/README.html"><strong aria-hidden="true">1.2.</strong> 通用设计方案</a></li><li class="chapter-item expanded "><a href="../../../../product_design/tools/README.html"><strong aria-hidden="true">1.3.</strong> 产品设计工具</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../product_design/tools/domain-design.html"><strong aria-hidden="true">1.3.1.</strong> 业务领域模型</a></li><li class="chapter-item expanded "><a href="../../../../product_design/tools/prototype-design.html"><strong aria-hidden="true">1.3.2.</strong> 产品原型</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../business_mod/README.html"><strong aria-hidden="true">2.</strong> 业务领域</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../business_mod/devtools/README.html"><strong aria-hidden="true">2.1.</strong> 研发工具建设经验总结</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../business_mod/devtools/pdt-introduction.html"><strong aria-hidden="true">2.1.1.</strong> 研发模式</a></li><li class="chapter-item expanded "><a href="../../../../business_mod/devtools/devtools&devprocess.html"><strong aria-hidden="true">2.1.2.</strong> 工具和流程的关系</a></li><li class="chapter-item expanded "><a href="../../../../business_mod/devtools/devtools/README.html"><strong aria-hidden="true">2.1.3.</strong> 研发工具</a></li><li class="chapter-item expanded "><a href="../../../../business_mod/devtools/deveco/README.html"><strong aria-hidden="true">2.1.4.</strong> 研发生态</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../business_mod/devtools/deveco/devprocess-2.0.html"><strong aria-hidden="true">2.1.4.1.</strong> 研发流程2.0</a></li><li class="chapter-item expanded "><a href="../../../../business_mod/devtools/deveco/devtools-2.0.html"><strong aria-hidden="true">2.1.4.2.</strong> 研发工具2.0</a></li><li class="chapter-item expanded "><a href="../../../../business_mod/devtools/deveco/problems.html"><strong aria-hidden="true">2.1.4.3.</strong> 问题总结</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../business_mod/devtools/deveff/README.html"><strong aria-hidden="true">2.1.5.</strong> 研发效能</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../business_mod/devtools/deveff/fusion.html"><strong aria-hidden="true">2.1.5.1.</strong> 效能平台</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../tools/README.html"><strong aria-hidden="true">3.</strong> 工具应用</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/README.html"><strong aria-hidden="true">3.1.</strong> 知识管理</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/survey/README.html"><strong aria-hidden="true">3.1.1.</strong> 工具调研</a></li><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/recommend/README.html"><strong aria-hidden="true">3.1.2.</strong> 推荐方案</a></li><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/personal_blog/README.html"><strong aria-hidden="true">3.1.3.</strong> 个人知识博客搭建</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/personal_blog/process/README.html" class="active"><strong aria-hidden="true">3.1.3.1.</strong> 搭建过程</a></li><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/personal_blog/tools_useguide/README.html"><strong aria-hidden="true">3.1.3.2.</strong> 工具介绍</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/personal_blog/tools_useguide/edit/README.html"><strong aria-hidden="true">3.1.3.2.1.</strong> 编写</a></li><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/personal_blog/tools_useguide/build/README.html"><strong aria-hidden="true">3.1.3.2.2.</strong> 编译</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/personal_blog/tools_useguide/build/mdbook_useguide.html"><strong aria-hidden="true">3.1.3.2.2.1.</strong> mdbook</a></li><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/personal_blog/tools_useguide/build/gitbook_useguide.html"><strong aria-hidden="true">3.1.3.2.2.2.</strong> Gitbook</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../tools/knowledge_base/personal_blog/tools_useguide/publish/README.html"><strong aria-hidden="true">3.1.3.2.3.</strong> 发布</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../tools/document_edit/README.html"><strong aria-hidden="true">3.2.</strong> 文档编写</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../tools/document_edit/tools_comparison.html"><strong aria-hidden="true">3.2.1.</strong> 工具对比</a></li><li class="chapter-item expanded "><a href="../../../../tools/document_edit/markdown/README.html"><strong aria-hidden="true">3.2.2.</strong> Markdown</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../tools/document_edit/markdown/markdown_grammar.html"><strong aria-hidden="true">3.2.2.1.</strong> Markdown语法</a></li><li class="chapter-item expanded "><a href="../../../../tools/document_edit/markdown/markdown_editor.html"><strong aria-hidden="true">3.2.2.2.</strong> Markdown编辑器</a></li><li class="chapter-item expanded "><a href="../../../../tools/document_edit/markdown/image_bed.html"><strong aria-hidden="true">3.2.2.3.</strong> 图床</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../tools/todo/README.html"><strong aria-hidden="true">3.3.</strong> 待办任务</a></li><li class="chapter-item expanded "><a href="../../../../tools/Kanban/README.html"><strong aria-hidden="true">3.4.</strong> 协作看板</a></li><li class="chapter-item expanded "><a href="../../../../tools/git_client/README.html"><strong aria-hidden="true">3.5.</strong> Git客户端</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../method_theory/README.html"><strong aria-hidden="true">4.</strong> 方法理论</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">个人博客</h1>

                    <div class="right-buttons">
                        
                        <a href="../../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#个人知识博客搭建方案" id="个人知识博客搭建方案">个人知识博客搭建方案</a></h1>
<p>下面记录一下我自己通过<code>mdbook+Github</code>搭建自己知识管理体系的过程。</p>
<h2><a class="header" href="#说在前面" id="说在前面">说在前面</a></h2>
<p>在开始说明我使用mdbook的方法之前，我想先整理一下自己对于知识管理工具的一些需求，以及我最后找到的解决方案。</p>
<p>我对于个人知识管理的需求，主要有几点：</p>
<ol>
<li>支持Markdown</li>
<li>支持文档层级</li>
<li>支持本地编辑</li>
<li>支持云端同步</li>
<li>支持发布</li>
</ol>
<p>根据上述的几点需求，我最终决定使用Github和mdbook来解决，原因主要是：</p>
<ul>
<li>Github支持本地和云端同步，这样就解决了我本地编辑和远端同步的需求</li>
<li>mdbook支持将Markdown文件编译为静态文件，解决了原始Markdown文件查看不方便的问题</li>
<li>Github Pages支持对编译后的静态文件进行发表，这样就解决了分享和远程查看的问题</li>
</ul>
<h2><a class="header" href="#整体方案" id="整体方案">整体方案</a></h2>
<p><img src="./images/blog-process.png" alt="ima" /></p>
<p>上图所示，是我设计的个人博客<code>从编写到发布</code>的主体流程，主要包括3个阶段：</p>
<ol>
<li>编写
<ol>
<li>本地编写：本地编写Markdown文件</li>
<li>云端同步：同步本地Markdown到云端（非必须，我为了跨设备编辑，加入了此步骤）</li>
</ol>
</li>
<li>编译
<ol>
<li>本地编译：在本将Markdown文件编译为静态站点文件</li>
<li>制品存放：将编译得到的制品文件存放至特定仓库（我个人使用Github Pages发布，所以要把制品文件存放到Github仓库下docs目录）</li>
</ol>
</li>
<li>发布
<ol>
<li>制品发布：将静态文件发布到服务器（我个人使用Github Pages发布，所以只要把仓库Push到远程仓库即可）</li>
</ol>
</li>
</ol>
<h2><a class="header" href="#操作流程" id="操作流程">操作流程</a></h2>
<p>如果现在准备开始一个新的博客，可以按照以下流程来进行操作。</p>
<h3><a class="header" href="#step-1-创建源文件存放仓库" id="step-1-创建源文件存放仓库">Step 1 创建源文件存放仓库</a></h3>
<p>在Github上创建1个仓库，用来存放Markdown源文件。</p>
<p>存放Markdown源文件的仓库可以设置为私有仓库，也可以设置为公开仓库，取决于个人是否愿意公开Markdown源文件。</p>
<blockquote>
<p>也可以把Markdown源文件和制品文件放在一个仓库，如果存放在同一个仓库，源文件一般存放于<code>src</code>目录。</p>
</blockquote>
<p>我是使用Github来同步源文件的，所以需要创建Github仓库来存放源文件，如果有其他渠道进行同步（例如：OneDrive），那么可以忽略此步骤。</p>
<p>创建Github仓库的详细操作方法，如下：</p>
<h5><a class="header" href="#01-注册并登录github" id="01-注册并登录github">01. 注册并登录Github</a></h5>
<p>访问Github：<a href="https://giithub.com">快速跳转</a></p>
<p>注册一个Github账号，然后登入系统。</p>
<h5><a class="header" href="#02-安装github客户端" id="02-安装github客户端">02. 安装Github客户端</a></h5>
<p>在本地安装Git客户端，市面上有很多很好用的Git客户端，我使用的是Github官方的客户端。</p>
<blockquote>
<p>其实我很推荐Tower这款Git客户端，无奈是个收费软件，使用了一段时间破解版，后来无意更新了一下，就不能再继续使用了。</p>
</blockquote>
<h5><a class="header" href="#03-git客户端登录github账号" id="03-git客户端登录github账号">03. Git客户端登录Github账号</a></h5>
<p>在本地的Github客户端登录之前注册的Github账号。</p>
<h5><a class="header" href="#04-创建git仓库" id="04-创建git仓库">04. 创建Git仓库</a></h5>
<p>使用Github客户端，在本地创建一个仓库，仓库名字根据实际需要来设置。</p>
<h5><a class="header" href="#05-同步仓库到github远程仓库" id="05-同步仓库到github远程仓库">05. 同步仓库到Github远程仓库</a></h5>
<p>使用Github客户端，将仓库push到云端，直接使用master分支即可。</p>
<h3><a class="header" href="#step-2-创建制品文件发布仓库" id="step-2-创建制品文件发布仓库">Step 2 创建制品文件发布仓库</a></h3>
<p>在Github上创建一个仓库，用来发布编译得到的制品文件。</p>
<p>要是有Github仓库来发布制品文件，首先需要创建一个Github仓库，具体操作方法可以参考上方介绍，除此之外，还需要对仓库进行一些配置，包括：</p>
<h5><a class="header" href="#01-配置docs目录" id="01-配置docs目录">01. 配置docs目录</a></h5>
<p>在仓库下创建<code>docs</code>目录。</p>
<blockquote>
<p>因为Github Pages只能设置为仓库根目录或者docs目录，所以，如果仓库某个分支，除了存放静态文件外，还需要存储其他文件（例如：Markdown源文件），就需要创建docs目录，用于存放后续mdbook编译得到的静态文件。</p>
<p>如果仓库的某个分支只存放静态文件，那么，直接将Github Pages设置为对应分支根目录即可，不需要设置docs目录。</p>
</blockquote>
<h5><a class="header" href="#02-开启github-pages" id="02-开启github-pages">02. 开启Github Pages</a></h5>
<p>需要去web端进行关于Github Pages的配置，如下：</p>
<ol>
<li>登录<a href="https://github.com">Github</a></li>
<li>进入仓库test</li>
<li>进入菜单Setting</li>
<li>确认仓库已经被设置为Public</li>
<li>找到Github Pages，设置分支为<code>master</code>，设置目录为<code>docs</code></li>
</ol>
<h3><a class="header" href="#step-3-mdbook初始化" id="step-3-mdbook初始化">Step 3 mdbook初始化</a></h3>
<p>打开命令行，cd到本地存放Markdown源文件的目录，执行mdbook初始化命令：</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>mdbook init
<span class="boring">}
</span></code></pre></pre>
<p>关于mdbook详细的使用方法，可以参考：<a href="../tools_useguide/mdbook_useguide.html">mdbook使用方法</a></p>
<h3><a class="header" href="#step-4-修改mdbook配置文件" id="step-4-修改mdbook配置文件">Step 4 修改mdbook配置文件</a></h3>
<p>因为下面两个原因，需要修改mdbook配置文件<code>book.toml</code>：</p>
<ul>
<li>Markdown源文件和编译得到的制品文件存放目录不在同一个目录下，跟默认配置不一致</li>
<li>源文件存放目录也不是默认的<code>src</code>目录</li>
</ul>
<p>修改的内容主要是：</p>
<ol>
<li>
<p>修改源文件存放目录为实际目录（SUMMARY文件所在目录），避免后续的编译步骤失败</p>
</li>
<li>
<p>加入编译制品文件输出目录配置：</p>
<pre><code>[build]
build-dir = &quot;../abc/docs&quot;
</code></pre>
<blockquote>
<p>按照上面的配置，编译得到的制品会存放在<code>book.toml</code>文件所在目录下的docs目录。</p>
</blockquote>
<p>因为我使用了单独的仓库（abc）来存放制品文件，所以，这里需要把制品文件输出目录更改为对应仓库下的docs目录。</p>
</li>
</ol>
<h3><a class="header" href="#step-5-编写markdown文件" id="step-5-编写markdown文件">Step 5 编写Markdown文件</a></h3>
<p>上述步骤完成后，就可以在本地编写Markdown文件了。</p>
<p>Markdown编辑器有很多，我个人推荐：<a href="https://typora.io/">Typora</a></p>
<p>更多Markdown编辑器推荐和对比：<a href="../../../document_edit/markdown/markdown_editor.html">Markdown编辑器</a></p>
<p>需要注意的时，更新Markdown文件后，要检查SUMMARY文件是否及时更新。</p>
<blockquote>
<p>Tips：在编写内容时，可以先更新SUMMARY文件，然后执行编译命令，自动补全缺失目录，然后再去编写实际的文件内容。</p>
</blockquote>
<h3><a class="header" href="#step-6-编译" id="step-6-编译">Step 6 编译</a></h3>
<p>编译操作，就是将Markdown源文件编译为静态文件的过程，具体的方法为：</p>
<ol>
<li>打开命令行，cd到<code>book.toml</code>文件所在的目录<code>abc</code></li>
<li>在终端里输入编译命令，有两个可用的命令，对应的命令和效果，如下：
<ul>
<li>mdbook build：根据book.toml文件中配置的源文件目录，找到源文件目录，然后在原文件目录下找到SUMMARY文件，根据SUMMARY文件的内容，将SUMMARY文件涉及到的目录下的Markdown文件编译为静态文件，然后，编译得到的静态文件默认放入<code>abc/book</code>目录，如果<code>abc/book</code>目录不存在，那么会自动创建该目录，并且将静态文件放入该目录</li>
<li>mdbook buid -d docs：该命令可以指定编译后的制品文件的存放目录，前半部分过程跟<code>mdbook build</code>一致，只是后面存放静态文件的时候，会存放到<code>abc/docs</code>目录下，如果<code>abc/docs</code>不存在，也会自动创建该目录，然后将静态文件放入该目录</li>
</ul>
</li>
</ol>
<p>因为在Step 4中，已经配置了制品输出目录，所以，在这一步执行<code>mdbook build</code>命令后，制品文件应该会直接输出到制品文件发布仓库下的docs目录，编译命令执行完成后，最好检查一下制品文件输出是否正确。</p>
<blockquote>
<p>如果修改制品文件输出目录配置，也可以直接把编译得到的制品文件复制到其他目录，再用于发布。</p>
</blockquote>
<blockquote>
<p>Tips：在book.toml文件中，添加编译文件输出目录配置参数，那么，每次只需执行<code>mdbook build</code>命令，编译得到的静态文件也会放入到指定目录中，因此，<code>mdbook build -d docs</code>也可以通过以下方式来完成：</p>
<ol>
<li>
<p>book.toml文件中添加以下内容：</p>
<pre><code>[build]
build-dir = &quot;docs&quot;
</code></pre>
</li>
<li>
<p>打开终端，执行<code>mdbook build</code></p>
</li>
</ol>
</blockquote>
<h3><a class="header" href="#step-7-push" id="step-7-push">Step 7 Push</a></h3>
<p>编译完成后，将<code>存放制品文件的仓库</code>Push到Github。</p>
<p>Push完成后，访问Github仓库的Github Pages链接，就可以看到最终的书籍效果了。</p>
<blockquote>
<p>我这里说明的方法，是直接将编译后的文件Push到Github，然后通过Github Pages来查看最红的书籍效果；这里再补充一个本地查看书籍效果的方法：</p>
<p>编译环节完成后，在源目录下执行命令<code>mdbook serve</code>，执行成功后，在浏览器地址栏输入<code>http://localhost:3000</code>，也可以查看书籍效果。</p>
<p>通常，会现在本地查看效果，符合预期，才会Push到Github。</p>
</blockquote>
<h2><a class="header" href="#扩展内容" id="扩展内容">扩展内容</a></h2>
<h3><a class="header" href="#基于gitlab来搭建" id="基于gitlab来搭建">基于Gitlab来搭建</a></h3>
<p>上面提到的是基于Github使用方法，通常，在公司内部，都是使用的Gitlab，这里，我说明一下基于Gitlab的使用方法：在本地编译好静态文件，然后Push到Gitlab仓库的<code>public</code>目录，再通过Gitlab Pages来访问。</p>
<p>相关链接：<a href="github_pages&amp;gitlab_pages.html">Github Pages &amp; Gitlab Pages</a></p>
<p>在这里，我主要想记录一下我在360企业安全工作期间，使用Gitlab来自动触发编译和发布的方法。</p>
<h3><a class="header" href="#gitlab相关操作" id="gitlab相关操作">Gitlab相关操作</a></h3>
<h5><a class="header" href="#step-1-创建gitlab仓库" id="step-1-创建gitlab仓库">Step 1 创建Gitlab仓库</a></h5>
<p>在Gitlab上创建用户发布mdbook的仓库。</p>
<h5><a class="header" href="#step-2-添加public目录" id="step-2-添加public目录">Step 2 添加public目录</a></h5>
<p>在仓库中添加public目录。</p>
<h5><a class="header" href="#step-3-将静态文件放入到public目录" id="step-3-将静态文件放入到public目录">Step 3 将静态文件放入到public目录</a></h5>
<p>将mdbook编译得到的静态文件，存放到master分支public目录。</p>
<h5><a class="header" href="#step-4-添加ci文件" id="step-4-添加ci文件">Step 4 添加ci文件</a></h5>
<p>在仓库目录下，添加ci文件，用于触发gitlab编译任务。</p>
<p>文件名为<code>.gitlab-ci.yml</code>，文件内容为：</p>
<pre><code class="language-yaml">pages:
  stage: deploy
  image: mdbook镜像地址
  script:
    - mdbook build -d public
  artifacts:
    paths:
      - public
  only:
    - master
</code></pre>
<p>上述配置完成后，只需要提交源文件变更，就会自动触发Gitlab ci构建，构建成功够，就可以通过Gitlab Pages来访问静态文件了。</p>
<h3><a class="header" href="#自动化" id="自动化">自动化</a></h3>
<p>上面提到的方法，自动化程度很弱：</p>
<ol>
<li>本地编写完成Markdown文件后，需要在本地手动执行编译</li>
<li>如果不希望将Markdown文件和静态文件放到一起，那么还需要单独讲静态文件放到拿出来进行发布
<ol>
<li>手动拷贝静态文件到docs或者public目录</li>
<li>手动部署静态文件到服务器</li>
</ol>
</li>
</ol>
<p>基于之前在360的经验，其实整个过程可以实现自动化，大概的思路如下：</p>
<ol>
<li>创建GitHub/Gitlab项目</li>
<li>将Markdown文件放到Git项目中</li>
<li>Git Push后触发Github工作流/Gitlab ci流水线</li>
<li>工作流/流水线自动执行mdbook编译</li>
<li>自动将编译制品存放到指定目录</li>
</ol>
<p>基于上述思路，我只需要编写Markdown文件，然后Push到远程仓库即可，确实减少了很多重复性工作，对于效率有提升。</p>
<blockquote>
<p>通常来说，如果实现上述的自动化，一般会把Markdown源文件和编译后的静态文件放在同一个仓库下，减少自动化流程的配置；但是，也可以设置源文件和静态文件存放在不同仓库，这样的话，配置密钥会麻烦一点。</p>
<p>如果不实现自动化，自己手动处理，那么只需要在<code>book.toml</code>文件中配置编译制品输出目录，就可以实现源文件和静态文件分离的效果了。</p>
</blockquote>
<h4><a class="header" href="#基于github-action的自动化" id="基于github-action的自动化">基于Github Action的自动化</a></h4>
<p>补充自动化的方法。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../../../tools/knowledge_base/personal_blog/README.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../../../tools/knowledge_base/personal_blog/tools_useguide/README.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../../../tools/knowledge_base/personal_blog/README.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../../../tools/knowledge_base/personal_blog/tools_useguide/README.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
